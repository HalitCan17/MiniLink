@model List<MiniLink.Models.ShortUrl>
@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center mt-5">
    <h1 class="display-4 fw-bold">MiniLink 🚀</h1>
    <p class="lead">Shorten your links, expand your reach.</p>

    <div class="row justify-content-center mt-4">
        <div class="col-md-8"> <form asp-action="Shorten" method="post" class="card p-4 shadow-sm mb-5">
                <div class="mb-3">
                    <label for="originalUrl" class="form-label fw-bold">Enter Long URL</label>
                    <input type="text" class="form-control form-control-lg" name="originalUrl" placeholder="https://example.com/very-long-url..." required>
                </div>
                <button type="submit" class="btn btn-primary btn-lg w-100">Shorten It!</button>
            </form>

            @if (ViewBag.Error != null)
            {
                <div class="alert alert-danger mt-3">
                    @ViewBag.Error
                </div>
            }

            @if (ViewBag.ShortUrl != null)
            {
                <div class="alert alert-success mt-3">
                    <p class="mb-1">🎉 Your Short Link is Ready:</p>
                    <a href="@ViewBag.ShortUrl" target="_blank" class="fw-bold fs-5">@ViewBag.ShortUrl</a>
                </div>
            }

            <div class="mt-5 text-start">
                <h3 class="fw-bold text-secondary border-bottom pb-2">📊 Recent Activities</h3>
                
                <div class="table-responsive">
                    <table class="table table-hover align-middle mt-3 bg-white shadow-sm rounded">
                        <thead class="table-light">
                            <tr>
                                <th style="width: 50%">Original URL</th>
                                <th style="width: 30%">Short Link</th>
                                <th style="width: 20%" class="text-center">Clicks</th>
                            </tr>
                        </thead>
                        <tbody>
                            @if (Model != null && Model.Any())
                            {
                                foreach (var item in Model)
                                {
                                    <tr>
                                        <td class="text-truncate" style="max-width: 300px;" title="@item.OriginalUrl">
                                            <a href="@item.OriginalUrl" target="_blank" class="text-decoration-none text-muted">
                                                @item.OriginalUrl
                                            </a>
                                        </td>
                                        <td>
                                            <a href="@($"{Context.Request.Scheme}://{Context.Request.Host}/{item.Code}")" target="_blank" class="fw-bold text-primary text-decoration-none">
                                                @($"{Context.Request.Scheme}://{Context.Request.Host}/{item.Code}")
                                            </a>
                                        </td>
                                        <td class="text-center">
                                            <span class="badge bg-secondary rounded-pill">@item.ClickCount</span>
                                        </td>
                                    </tr>
                                }
                            }
                            else
                            {
                                <tr>
                                    <td colspan="3" class="text-center text-muted py-4">
                                        No links created yet. Be the first one! 🚀
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
            </div>
    </div>
</div>